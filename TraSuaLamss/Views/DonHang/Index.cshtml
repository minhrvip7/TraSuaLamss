@model PagedList.IPagedList<TraSuaLamss.Models.DonHang>
@using PagedList.Mvc;
@{
    ViewBag.Title = "Details";
    var format = System.Globalization.CultureInfo.GetCultureInfo("vi-VN");
    var thang = Model.FirstOrDefault().NgayDat.Month;
}
<h2 style="padding-left:5%">Danh sách đơn hàng</h2>
<br />
<p>
    @using (Html.BeginForm())
    {
        <div class="input-group mb-3" style="padding-left:5%">
            <div class="col-xs-2">
                @Html.TextBox("searchstr", null, new { @class = "form-control", placeholder = "Nhập", @type = "number" })
            </div>
            <div class="input-group-append">
                <button class="btn btn-warning" type="submit">
                    Tìm kiếm
                    <img src="~/Content/Img/search_32px.png" width="20" height="20">
                </button>
            </div>
        </div>
    }
</p>
<table class="table table-striped table-bordered">
    <thead class="thead-light">
        <tr>
            <th>Mã đơn hàng</th>
            <th>Khách hàng</th>
            <th>Thành tiền</th>
            <th>Phương thức thanh toán</th>
            <th>Địa chỉ</th>
            <th>Tình trạng giao hàng</th>
            <th>Ngày đặt</th>
            <th></th>
        </tr>
    </thead>

    @foreach (var item in Model)
    {
        <tr>
            <td>@Html.DisplayFor(modelItem => item.MaDH)</td>
            <td>@Html.DisplayFor(modelItem => item.KHACHHANG.TenKH)</td>
            <td>@String.Format(format, "{0:c0}", @item.ThanhTien)</td>
            <td>@Html.DisplayFor(modelItem => item.PhuongThucThanhToan)</td>
            <td>@Html.DisplayFor(modelItem => item.DiaChiGiaoHang)</td>
            <td>@Html.DisplayFor(modelItem => item.TinhTrangGiaoHang)</td>
            <td>@Html.DisplayFor(modelItem => item.NgayDat)</td>
            <td>
                <a class="btn btn-info" href="@Url.Action("Details", "LichSuGiaoDich", new {id = item.MaDH})">
                    <img src="~/Content/Img/information_50px.png" height="20" width="20" />
                </a>
                <a class="btn btn-danger" href="@Url.Action("Delete", "LichSuGiaoDich", new { id = item.MaDH})">
                    <img src="~/Content/Img/Delete_24px.png" height="20" width="20" />
                </a>
            </td>
        </tr>
    }

</table>
<br />
<centrer>
    <div class="center2" style="text-align:center">
        @if (Model.PageCount > 1)
        {
            <strong>
                @Html.PagedListPager(Model, page => Url.Action("Index", new { page }))
            </strong>
        }
    </div>
</centrer>
<button style="padding-left:5%" class="btn btn-dark" onclick="history.back()">Trở về</button>